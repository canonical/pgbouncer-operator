{"uid":"193bde2763399c3d","name":"test_mailman3_core_db","fullName":"tests.integration.relations.test_db#test_mailman3_core_db","historyId":"810e082a5963a194044ada7622e455fd","time":{"start":1771292122429,"stop":1771292805664,"duration":683235},"description":"Deploy Mailman3 Core to test the 'db' relation.","descriptionHtml":"<p>Deploy Mailman3 Core to test the 'db' relation.</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"charm_focal","time":{"start":1771292122254,"stop":1771292122255,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1771292122254,"stop":1771292122254,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm","time":{"start":1771292122254,"stop":1771292122254,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1771292122255,"stop":1771292122428,"duration":173},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1771292122255,"stop":1771292122255,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1771292122429,"stop":1771292122429,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Deploy Mailman3 Core to test the 'db' relation.","status":"passed","steps":[],"attachments":[{"uid":"2d31d045b75a07a2","name":"log","source":"2d31d045b75a07a2.txt","type":"text/plain","size":8300}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1771292805664,"stop":1771292805664,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1771293182260,"stop":1771293183775,"duration":1515},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1771293183776,"stop":1771293183777,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1771293183777,"stop":1771293183777,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1771293183777,"stop":1771293183777,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.relations"},{"name":"suite","value":"test_db"},{"name":"host","value":"runnervmjduv7"},{"name":"thread","value":"11753-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.relations.test_db"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"a9434f39d49a7c69","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":7,"broken":62,"skipped":0,"passed":487,"unknown":14,"total":570},"items":[{"uid":"d67a09a6854d9e59","reportUrl":"../3140//#testresult/d67a09a6854d9e59","status":"broken","statusDetails":"mailmanclient.restbase.connection.MailmanConnectionError: ('Could not connect to Mailman API: ', 'ConnectionError(MaxRetryError(\\'HTTPConnectionPool(host=\\\\\\'10.118.149.191\\\\\\', port=8001): Max retries exceeded with url: /3.1/domains (Caused by NewConnectionError(\"HTTPConnection(host=\\\\\\'10.118.149.191\\\\\\', port=8001): Failed to establish a new connection: [Errno 111] Connection refused\"))\\'))')","time":{"start":1771205736030,"stop":1771206389790,"duration":653760}},{"uid":"4790db950f166bb5","reportUrl":"../3139//#testresult/4790db950f166bb5","status":"passed","time":{"start":1771119355977,"stop":1771120010724,"duration":654747}},{"uid":"5b06ed1d945ce0f","reportUrl":"../3138//#testresult/5b06ed1d945ce0f","status":"passed","time":{"start":1771032945312,"stop":1771033614143,"duration":668831}},{"uid":"388b0d0e86ce8839","reportUrl":"../3137//#testresult/388b0d0e86ce8839","status":"passed","time":{"start":1770946799155,"stop":1770947467220,"duration":668065}},{"uid":"6137c6e0b191bd7d","reportUrl":"../3136//#testresult/6137c6e0b191bd7d","status":"passed","time":{"start":1770860148257,"stop":1770860819486,"duration":671229}},{"uid":"5a5b16fa5b52f383","reportUrl":"../3131//#testresult/5a5b16fa5b52f383","status":"passed","time":{"start":1770687977118,"stop":1770688652103,"duration":674985}},{"uid":"c94f6f0eea292058","reportUrl":"../3130//#testresult/c94f6f0eea292058","status":"passed","time":{"start":1770600974889,"stop":1770601685512,"duration":710623}},{"uid":"4ee11bb62b62ae54","reportUrl":"../3129//#testresult/4ee11bb62b62ae54","status":"passed","time":{"start":1770514661959,"stop":1770515306050,"duration":644091}},{"uid":"13c8d1c3e9185c20","reportUrl":"../3128//#testresult/13c8d1c3e9185c20","status":"passed","time":{"start":1770428156412,"stop":1770428791856,"duration":635444}},{"uid":"10f72d1b35792585","reportUrl":"../3125//#testresult/10f72d1b35792585","status":"passed","time":{"start":1770341783152,"stop":1770342446788,"duration":663636}},{"uid":"63c616151b349350","reportUrl":"../3124//#testresult/63c616151b349350","status":"passed","time":{"start":1770255420632,"stop":1770256138225,"duration":717593}},{"uid":"3935adab67649075","reportUrl":"../3123//#testresult/3935adab67649075","status":"passed","time":{"start":1770168990793,"stop":1770169648240,"duration":657447}},{"uid":"cd73348b0ec778c1","reportUrl":"../3121//#testresult/cd73348b0ec778c1","status":"passed","time":{"start":1770083718926,"stop":1770084398204,"duration":679278}},{"uid":"f24bad842581f528","reportUrl":"../3116//#testresult/f24bad842581f528","status":"passed","time":{"start":1769996167916,"stop":1769996858249,"duration":690333}},{"uid":"1d419933f06e71f8","reportUrl":"../3115//#testresult/1d419933f06e71f8","status":"broken","statusDetails":"mailmanclient.restbase.connection.MailmanConnectionError: ('Could not connect to Mailman API: ', 'ConnectionError(MaxRetryError(\\'HTTPConnectionPool(host=\\\\\\'10.221.154.193\\\\\\', port=8001): Max retries exceeded with url: /3.1/domains (Caused by NewConnectionError(\"HTTPConnection(host=\\\\\\'10.221.154.193\\\\\\', port=8001): Failed to establish a new connection: [Errno 111] Connection refused\"))\\'))')","time":{"start":1769909777945,"stop":1769910502431,"duration":724486}},{"uid":"fff6db28900f2454","reportUrl":"../3114//#testresult/fff6db28900f2454","status":"passed","time":{"start":1769823369695,"stop":1769824052896,"duration":683201}},{"uid":"f18d004fbcfc0efc","reportUrl":"../3113//#testresult/f18d004fbcfc0efc","status":"passed","time":{"start":1769738159833,"stop":1769738846511,"duration":686678}},{"uid":"8c67d669c2424834","reportUrl":"../3111//#testresult/8c67d669c2424834","status":"passed","time":{"start":1769651873809,"stop":1769652528632,"duration":654823}},{"uid":"ee79a8459aa04c01","reportUrl":"../3104//#testresult/ee79a8459aa04c01","status":"passed","time":{"start":1769391318830,"stop":1769391951332,"duration":632502}},{"uid":"90ffde7aaa3fc722","reportUrl":"../3103//#testresult/90ffde7aaa3fc722","status":"failed","statusDetails":"AssertionError: no postgres db url, Stderr: GNU Mailman 3.2.2 (La Villa Strangiato)\n  Python 3.8.10 (default, Mar 18 2025, 20:04:55) \n  [GCC 9.4.0]\n  config file: /etc/mailman3/mailman.cfg\n  db url: sqlite:////var/lib/mailman3/data/mailman.db\n  devmode: DISABLED\n  REST root url: http://localhost:8001/3.1/\n  REST credentials: restadmin:MihKe7C9MDcf6R3N/VRhyKBrsE3o1pPUdQxRbGvasvwk7atB\n  \nassert 'db url: postgres://' in 'GNU Mailman 3.2.2 (La Villa Strangiato)\\nPython 3.8.10 (default, Mar 18 2025, 20:04:55) \\n[GCC 9.4.0]\\nconfig file: /etc/mailman3/mailman.cfg\\ndb url: sqlite:////var/lib/mailman3/data/mailman.db\\ndevmode: DISABLED\\nREST root url: http://localhost:8001/3.1/\\nREST credentials: restadmin:MihKe7C9MDcf6R3N/VRhyKBrsE3o1pPUdQxRbGvasvwk7atB\\n'","time":{"start":1769304970060,"stop":1769305610135,"duration":640075}}]},"tags":["asyncio","abort_on_fail"]},"source":"193bde2763399c3d.json","parameterValues":[]}