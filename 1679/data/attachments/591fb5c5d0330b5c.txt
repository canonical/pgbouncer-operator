[32mINFO    [0m pytest_operator.plugin:plugin.py:734 Connecting to existing model localhost-localhost:test on unspecified cloud
[32mINFO    [0m juju.model:model.py:2097 Deploying ch:amd64/jammy/postgresql-413
[32mINFO    [0m juju.model:model.py:2097 Deploying local:focal/pgbouncer-0
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [allocating] waiting: waiting for machine
  postgresql/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [allocating] waiting: waiting for machine
  postgresql/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [allocating] waiting: waiting for machine
  postgresql/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [allocating] waiting: agent initialising
  postgresql/1 [allocating] waiting: agent initialising
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [executing] maintenance: installing PostgreSQL
  postgresql/1 [executing] maintenance: installing PostgreSQL
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [idle] waiting: awaiting passwords generation
  postgresql/1 [executing] waiting: waiting to start PostgreSQL
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [idle] waiting: awaiting passwords generation
  postgresql/1 [executing] waiting: waiting to start PostgreSQL
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [idle] waiting: awaiting passwords generation
  postgresql/1 [executing] waiting: waiting to start PostgreSQL
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [idle] waiting: awaiting passwords generation
  postgresql/1 [executing] waiting: waiting to start PostgreSQL
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [idle] waiting: awaiting passwords generation
  postgresql/1 [executing] waiting: waiting to start PostgreSQL
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [idle] waiting: awaiting for cluster to start
  postgresql/1 [executing] maintenance: reconfiguring cluster
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [idle] waiting: awaiting for cluster to start
  postgresql/1 [executing] maintenance: reconfiguring cluster
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [executing] waiting: awaiting for cluster to start
  postgresql/1 [executing] active: Primary
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [executing] waiting: awaiting for cluster to start
  postgresql/1 [executing] active: Primary
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [executing] waiting: awaiting for cluster to start
  postgresql/1 [idle] active: Primary
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [executing] waiting: awaiting for member to start
  postgresql/1 [idle] active: Primary
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [executing] active: 
  postgresql/1 [idle] active: Primary
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [executing] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [idle] active: 
  postgresql/1 [executing] active: Primary
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/1 [idle] active: Primary
[33mWARNING [0m juju.model:model.py:1563 relate is deprecated and will be removed. Use integrate instead.
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  postgresql/0 [idle] active: 
  postgresql/1 [idle] active: Primary
[32mINFO    [0m juju.model:model.py:2097 Deploying ch:amd64/focal/mailman3-core-18
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] maintenance: Installing mailman3,postfix,postfix-policyd-spf-python,spamassassin,spamc
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] maintenance: configuring postfix for posts to mailing lists
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] maintenance: Installing python3-mailman-hyperkitty
[33mWARNING [0m juju.model:model.py:1563 relate is deprecated and will be removed. Use integrate instead.
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [idle] active: Ready (source version/commit e1d5a03)
  postgresql/0 [idle] active: 
  postgresql/1 [idle] active: Primary
  pgbouncer/0 [allocating] waiting: installing agent
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  postgresql/0 [executing] active: 
  postgresql/1 [executing] active: Primary
  pgbouncer/0 [executing] waiting: Waiting to start PgBouncer
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] active: 
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] maintenance: Reloading Pgbouncer
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] maintenance: Reloading Pgbouncer
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] maintenance: Reloading Pgbouncer
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] maintenance: Reloading Pgbouncer
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] maintenance: Reloading Pgbouncer
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] maintenance: Reloading Pgbouncer
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] maintenance: Reloading Pgbouncer
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] maintenance: Reloading Pgbouncer
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] maintenance: Reloading Pgbouncer
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] maintenance: Reloading Pgbouncer
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] maintenance: Reloading Pgbouncer
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  mailman3-core/0 [executing] active: Ready (source version/commit e1d5a03)
  pgbouncer/0 [executing] active: 
[32mINFO    [0m root:helpers.py:96 (0, '{"pgbouncer/0":{"workload-version":"1.21.0","machine":"2","opened-ports":null,"public-address":"10.117.178.118","charm":"local:focal/pgbouncer-0","leader":true,"life":"alive","relation-info":[{"relation-id":5,"endpoint":"backend-database","related-endpoint":"database","application-data":{"data":"{\\"database\\": \\"pgbouncer\\", \\"extra-user-roles\\": \\"SUPERUSER\\", \\"requested-secrets\\": \\"[\\\\\\"username\\\\\\", \\\\\\"password\\\\\\", \\\\\\"tls\\\\\\", \\\\\\"tls-ca\\\\\\", \\\\\\"uris\\\\\\"]\\"}","database":"pgbouncer","endpoints":"10.117.178.152:5432","read-only-endpoints":"10.117.178.211:5432","secret-user":"secret://d5812ac3-05cc-49ec-8c69-f538863c3e64/cpigsm8d0g7288ho0qrg","version":"14.11"},"local-unit":{"in-scope":false,"data":null},"related-units":{"postgresql/0":{"in-scope":true,"data":{"egress-subnets":"10.117.178.211/32","ingress-address":"10.117.178.211","private-address":"10.117.178.211"}},"postgresql/1":{"in-scope":true,"data":{"egress-subnets":"10.117.178.152/32","ingress-address":"10.117.178.152","private-address":"10.117.178.152"}}}},{"relation-id":6,"endpoint":"db","related-endpoint":"db","application-data":{},"local-unit":{"in-scope":false,"data":null},"related-units":{"mailman3-core/0":{"in-scope":true,"data":{"database":"mailman3","egress-subnets":"10.117.178.118/32","ingress-address":"10.117.178.118","private-address":"10.117.178.118"}}}},{"relation-id":4,"endpoint":"pgb-peers","related-endpoint":"pgb-peers","application-data":{"leader_ip":"10.117.178.118","pgb_dbs_config":"{\\"6\\": {\\"name\\": \\"mailman3\\", \\"legacy\\": true}}","pgbouncer_user_6_test":"{\\"user\\": \\"pgbouncer_user_6_test\\", \\"password\\": \\"b187H4AK8HyTy2wAUgxrvgWE\\", \\"database\\": \\"mailman3\\"}","readonly_dbs":"[]"},"local-unit":{"in-scope":true,"data":{"egress-subnets":"10.117.178.118/32","ingress-address":"10.117.178.118","private-address":"10.117.178.118"}}},{"relation-id":3,"endpoint":"upgrade","related-endpoint":"upgrade","application-data":{"dependencies":"{\\"charm\\": {\\"dependencies\\": {}, \\"name\\": \\"pgbouncer\\", \\"upgrade_supported\\": \\"\\u003e0\\", \\"version\\": \\"1\\"}, \\"snap\\": {\\"dependencies\\": {}, \\"name\\": \\"charmed-postgresql\\", \\"upgrade_supported\\": \\"^1\\", \\"version\\": \\"1.18.0\\"}}"},"local-unit":{"in-scope":true,"data":{"egress-subnets":"10.117.178.118/32","ingress-address":"10.117.178.118","private-address":"10.117.178.118","state":"idle"}}}]}}\n', '')